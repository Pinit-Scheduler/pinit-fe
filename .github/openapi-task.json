{
  "openapi": "3.1.0",
  "info": {
    "title": "Pinit Task API",
    "description": "일정 관리와 의존 관계 기능을 제공하는 API",
    "contact": {
      "name": "Pinit Team",
      "email": "support@pinit.local"
    },
    "version": "v1"
  },
  "servers": [
    {
      "url": "http://localhost:8080",
      "description": "Local"
    },
    {
      "url": "https://api.pinit.local",
      "description": "Production"
    }
  ],
  "tags": [
    {
      "name": "Schedule",
      "description": "일정 관리 API"
    },
    {
      "name": "Statistics",
      "description": "통계 조회 API"
    }
  ],
  "paths": {
    "/schedules": {
      "get": {
        "tags": [
          "Schedule"
        ],
        "summary": "일정 목록 조회",
        "description": "지정한 날짜의 일정을 조회합니다.",
        "operationId": "getSchedules",
        "parameters": [
          {
            "name": "memberId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "date",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "목록 조회에 성공했습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ScheduleResponse"
                  }
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "대상을 찾을 수 없습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "현재 상태와 충돌했습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "서버 내부 오류",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Schedule"
        ],
        "summary": "일정 생성",
        "description": "새 일정과 의존 관계를 등록합니다.",
        "operationId": "createSchedule",
        "parameters": [
          {
            "name": "memberId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ScheduleRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "일정이 성공적으로 생성되었습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ScheduleResponse"
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "대상을 찾을 수 없습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "현재 상태와 충돌했습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "서버 내부 오류",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/schedules/{scheduleId}/suspend": {
      "post": {
        "tags": [
          "Schedule"
        ],
        "summary": "일정 일시중지",
        "description": "진행 중인 일정을 일시중지합니다.",
        "operationId": "suspendSchedule",
        "parameters": [
          {
            "name": "memberId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "scheduleId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "time",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "zoneId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "일정이 일시중지되었습니다."
          },
          "400": {
            "description": "잘못된 요청",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "대상을 찾을 수 없습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "현재 상태와 충돌했습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "서버 내부 오류",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/schedules/{scheduleId}/start": {
      "post": {
        "tags": [
          "Schedule"
        ],
        "summary": "일정 시작",
        "description": "일정을 진행 중 상태로 변경합니다.",
        "operationId": "startSchedule",
        "parameters": [
          {
            "name": "memberId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "scheduleId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "time",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "zoneId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "일정이 시작되었습니다."
          },
          "400": {
            "description": "잘못된 요청",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "대상을 찾을 수 없습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "현재 상태와 충돌했습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "서버 내부 오류",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/schedules/{scheduleId}/complete": {
      "post": {
        "tags": [
          "Schedule"
        ],
        "summary": "일정 완료",
        "description": "진행 중인 일정을 완료 처리합니다.",
        "operationId": "completeSchedule",
        "parameters": [
          {
            "name": "memberId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "scheduleId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "time",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "zoneId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "일정이 완료되었습니다."
          },
          "400": {
            "description": "잘못된 요청",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "대상을 찾을 수 없습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "현재 상태와 충돌했습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "서버 내부 오류",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/schedules/{scheduleId}/cancel": {
      "post": {
        "tags": [
          "Schedule"
        ],
        "summary": "일정 취소",
        "description": "예정되었거나 진행 중인 일정을 취소합니다.",
        "operationId": "cancelSchedule",
        "parameters": [
          {
            "name": "memberId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "scheduleId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "일정이 취소되었습니다."
          },
          "400": {
            "description": "잘못된 요청",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "대상을 찾을 수 없습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "현재 상태와 충돌했습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "서버 내부 오류",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/schedules/{scheduleId}": {
      "get": {
        "tags": [
          "Schedule"
        ],
        "summary": "일정 단건 조회",
        "description": "특정 일정의 상세 정보를 조회합니다.",
        "operationId": "getSchedule",
        "parameters": [
          {
            "name": "memberId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "scheduleId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "단건 조회에 성공했습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ScheduleResponse"
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "대상을 찾을 수 없습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "현재 상태와 충돌했습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "서버 내부 오류",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Schedule"
        ],
        "summary": "일정 삭제",
        "description": "지정한 일정을 삭제합니다.",
        "operationId": "deleteSchedule",
        "parameters": [
          {
            "name": "memberId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "scheduleId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "일정이 삭제되었습니다."
          },
          "400": {
            "description": "잘못된 요청",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "대상을 찾을 수 없습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "현재 상태와 충돌했습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "서버 내부 오류",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Schedule"
        ],
        "summary": "일정 수정",
        "description": "일정 본문과 의존 관계를 함께 수정합니다.",
        "operationId": "updateSchedule",
        "parameters": [
          {
            "name": "memberId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "scheduleId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ScheduleRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "일정이 수정되었습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ScheduleResponse"
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "대상을 찾을 수 없습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "현재 상태와 충돌했습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "서버 내부 오류",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/statistics": {
      "get": {
        "tags": [
          "Statistics"
        ],
        "summary": "사용자 통계 조회",
        "description": "주어진 시점 기준 주간 통계를 조회합니다.",
        "operationId": "getStatistics",
        "parameters": [
          {
            "name": "memberId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "time",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "zoneId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "통계 조회 성공",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/StatisticsResponse"
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "통계를 찾을 수 없습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/schedules/week": {
      "get": {
        "tags": [
          "Schedule"
        ],
        "summary": "주간 일정 조회",
        "description": "해당 주의 일정을 조회합니다.",
        "operationId": "getWeeklySchedules",
        "parameters": [
          {
            "name": "memberId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "time",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "zoneId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "주간 일정 조회에 성공했습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ScheduleResponse"
                  }
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "대상을 찾을 수 없습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "현재 상태와 충돌했습니다.",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "서버 내부 오류",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/now": {
      "get": {
        "tags": [
          "member-controller"
        ],
        "summary": "현재 진행 중인 일정 ID 조회",
        "description": "사용자의 현재 진행 중인 일정 ID를 조회합니다.",
        "operationId": "getNowInProgressScheduleId",
        "parameters": [
          {
            "name": "memberId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "integer",
                  "format": "int64"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "DateTimeWithZone": {
        "type": "object",
        "properties": {
          "dateTime": {
            "type": "string",
            "format": "date-time",
            "description": "지역 시각",
            "example": "2024-03-01T18:00:00"
          },
          "zoneId": {
            "type": "string",
            "description": "시간대 ID",
            "example": "Asia/Seoul"
          }
        },
        "required": [
          "dateTime",
          "zoneId"
        ]
      },
      "DependencyRequest": {
        "type": "object",
        "properties": {
          "fromId": {
            "type": "integer",
            "format": "int64",
            "description": "선행 일정 ID",
            "example": 1
          },
          "toId": {
            "type": "integer",
            "format": "int64",
            "description": "후행 일정 ID",
            "example": 2
          }
        },
        "required": [
          "fromId",
          "toId"
        ]
      },
      "ScheduleRequest": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "description": "일정 제목",
            "example": "스터디 준비",
            "minLength": 1
          },
          "description": {
            "type": "string",
            "description": "일정 설명",
            "example": "다음 주 발표 자료 정리",
            "minLength": 1
          },
          "deadline": {
            "$ref": "#/components/schemas/DateTimeWithZone",
            "description": "마감 기한",
            "example": {
              "dateTime": "2024-03-01T18:00:00",
              "zoneId": "Asia/Seoul"
            }
          },
          "importance": {
            "type": "integer",
            "format": "int32",
            "description": "중요도 (1~9)",
            "example": 5,
            "maximum": 9,
            "minimum": 1
          },
          "urgency": {
            "type": "integer",
            "format": "int32",
            "description": "긴급도 (1~9)",
            "example": 7,
            "maximum": 9,
            "minimum": 1
          },
          "taskType": {
            "type": "string",
            "description": "작업 유형",
            "enum": [
              "DEEP_WORK",
              "QUICK_TASK",
              "ADMIN_TASK"
            ],
            "example": "TASK"
          },
          "date": {
            "$ref": "#/components/schemas/DateTimeWithZone",
            "description": "일정 시작 예정 시각",
            "example": {
              "dateTime": "2024-02-28T09:00:00",
              "zoneId": "Asia/Seoul"
            }
          },
          "removeDependencies": {
            "type": "array",
            "description": "제거할 의존 관계 목록",
            "items": {
              "$ref": "#/components/schemas/DependencyRequest"
            }
          },
          "addDependencies": {
            "type": "array",
            "description": "추가할 의존 관계 목록",
            "items": {
              "$ref": "#/components/schemas/DependencyRequest"
            }
          }
        },
        "required": [
          "date",
          "deadline",
          "description",
          "importance",
          "taskType",
          "title",
          "urgency"
        ]
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "timestamp": {
            "type": "string",
            "format": "date-time"
          },
          "status": {
            "type": "integer",
            "format": "int32"
          },
          "error": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "path": {
            "type": "string"
          }
        }
      },
      "ScheduleResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64",
            "description": "일정 ID",
            "example": 10
          },
          "ownerId": {
            "type": "integer",
            "format": "int64",
            "description": "회원 ID",
            "example": 3
          },
          "title": {
            "type": "string",
            "description": "일정 제목"
          },
          "description": {
            "type": "string",
            "description": "일정 설명"
          },
          "date": {
            "$ref": "#/components/schemas/DateTimeWithZone",
            "description": "일정 시작 예정 시각"
          },
          "deadline": {
            "$ref": "#/components/schemas/DateTimeWithZone",
            "description": "마감 기한"
          },
          "importance": {
            "type": "integer",
            "format": "int32",
            "description": "중요도"
          },
          "urgency": {
            "type": "integer",
            "format": "int32",
            "description": "긴급도"
          },
          "state": {
            "type": "string",
            "description": "현재 상태"
          }
        }
      },
      "StatisticsResponse": {
        "type": "object",
        "description": "사용자 주간 통계 응답 DTO",
        "properties": {
          "memberId": {
            "type": "integer",
            "format": "int64",
            "description": "회원 ID"
          },
          "startOfWeek": {
            "$ref": "#/components/schemas/DateTimeWithZone",
            "description": "통계 기준 주간의 시작 시각"
          },
          "deepWorkElapsedTime": {
            "type": "string",
            "description": "딥 워크 누적 시간"
          },
          "adminWorkElapsedTime": {
            "type": "string",
            "description": "관리 업무 누적 시간"
          },
          "totalWorkElapsedTime": {
            "type": "string",
            "description": "총 작업 누적 시간"
          }
        }
      }
    }
  }
}