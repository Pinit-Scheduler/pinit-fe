# 시간대 파라미터 가이드

목표: 모든 API 요청이 사용자 설정 시간대(`TimePreferencesContext`)를 일관되게 반영하도록 한다.

## 원칙
- 날짜/시간 직렬화는 `src/shared/utils/datetime.ts`의 `toApiDateTimeWithZone`만 사용한다.
- GET 쿼리의 시간/존 파라미터는 `src/shared/utils/timeParams.ts`의 `withTimeZoneParams`를 사용한다.
- `Date.prototype.toISOString()` 직접 호출 금지: 로컬 오프셋이 UTC로 강제되면서 마감/알람 시각이 밀릴 수 있음.
- 화면/로직에서 기준이 되는 오프셋은 항상 `useTimePreferences()`에서 가져온다.

## 사용 예시
- 단일 스케줄 조회: `fetchSchedules` → 내부에서 `withTimeZoneParams(toApiDateTimeWithZone(dayjs(...)))` 사용.
- 신규 스케줄 생성/수정: payload의 `date` 필드는 반드시 `toApiDateTimeWithZone(formValue)`로 변환.
- 주간 통계: `fetchWeeklyStatistics` → `toApiDateTimeWithZone(time)` 후 쿼리 구성.

## 체크 포인트
- 신규 코드가 날짜/시간을 쿼리로 보낼 때 `withTimeZoneParams`를 사용하고 있는지 확인.
- 캘린더/리스트 화면에서 `getTodayWithOffset(offsetMinutes)`로 오늘 날짜를 산출하는지 확인.
- 테스트 시나리오: 시간대 변경(예: UTC+9 → UTC-5) 후 Today/일정/통계 화면이 맞는 날짜를 보여주는지 검증.
