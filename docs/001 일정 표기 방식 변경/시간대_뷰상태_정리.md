# ScheduleViewState & TimePreferences 의존성 정리

- 전제: 앱은 반드시 `TimePreferencesProvider`와 `ScheduleViewStateProvider`를 `App` 루트에서 감싼다. Fallback 컨텍스트는 제거되었으므로 Provider 누락 시 즉시 에러가 난다.
- 시간대 소스: `useTimePreferences()` → `offsetMinutes`, `zoneId`, `offsetLabel`. 일정 뷰 상태는 이 오프셋을 기반으로 오늘 날짜/주 시작을 계산한다.
- 일정 뷰 상태: `useScheduleViewState()`는 `selectedDate`, `selectedDateKey`, `currentWeekStart`와 `goToWeek/selectDate/resetToToday`를 제공한다. 날짜 포맷팅/키 생성도 시간대 오프셋을 반영한다.
- 일원화 선택: 시간대 관리와 날짜 계산은 각각의 컨텍스트 훅을 통해서만 접근한다. 시간대를 훅 내부에서 재계산하지 말고, `useTimePreferences()` → `useScheduleViewState()` 순서로 의존하도록 한다.
- 업데이트 규칙: 시간대가 바뀌면 `ScheduleViewStateProvider`가 `offsetMinutes`를 키로 가지므로 상태가 리셋되어 주/선택 날짜가 새 시간대에 맞춰 재계산된다.
